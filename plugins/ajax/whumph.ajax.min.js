//  whump.ajax.js 0.0.1
//  https://github.com/flovan/whumph
//  (c) 2015-whateverthecurrentyearis Florian Vanthuyne
//  Whumph may be freely distributed under the MIT license.
!function(e){"use strict";if(Whumph){var r=function(e){var r={};return"?"===e.substr(0,1)&&(e=e.substr(1)),e.split("&").forEach(function(e){e=e.split("="),r[e[0]]=e[1]}),r},t=function(e){var r=[];for(var t in e)e.hasOwnProperty(t)&&r.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return r.join("&").replace(/%20/g,"+")};e.extend(e,{queryStringToObject:r,objectToQueryString:t,ajax:function(o,n){if(!o||"string"!=typeof o)throw new TypeError("URL parameter cannot be "+o);var s=e.extend({url:o,data:{},method:"GET",headers:{},xhr:new XMLHttpRequest,success:function(){},fail:function(){}},n||{}),a=s.url.indexOf("?")+1;s.method=s.method.toUpperCase(),"GET"===s.method&&s.data&&(s.url=s.url.substr(0,a)+t(e.extend(r(s.url.substr(a)),s.data))),s.xhr.open(s.method,s.url,s.async!==!1,s.user,s.password);for(var u in n)if(u in s.xhr)try{s.xhr[u]=n[u]}catch(h){self.console&&console.error(h)}"GET"===s.method||s.headers["Content-type"]||s.headers["Content-Type"]||s.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var d in s.headers)s.xhr.setRequestHeader(d,s.headers[d]);s.xhr.onload=function(){document.body.removeAttribute("data-loading"),0===s.xhr.status||s.xhr.status>=200&&s.xhr.status<300||304===s.xhr.status?s.success.call(s.xhr,s.xhr.response):s.error.call(s.xhr,s.xhr.response)},s.xhr.onerror=function(){document.body.removeAttribute("data-loading"),reject(Error("Network Error"))},s.xhr.send("GET"===s.method?null:s.data)}})}}(Whumph);
